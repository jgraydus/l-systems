<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>L-Systems</title>
                <style>
                    body {
			    background-color: black;
			    margin: 0;
		    }
		    body * {
			    box-sizing: border-box;
		    }
		    #canvas {
			    border: 1px solid red;
			    height: 100%;
			    width: 100%;
		    }
		    #main {
			    position: absolute;
			    top: 0;
			    bottom: 0;
			    left: 0;
			    right: 0;
			    display: flex;
			    flex-direction: row;
		    }
		    #controls {
			    padding: 10px;
			    width: 800px;
			    display: flex;
			    flex-direction: column;
		    }
		    #controls textarea {
			    height: 1000px;
		    }
                </style>
		<script>
			window.zoom = 1.0;

			function doIt() {
			    console.log("DOING IT");
			    if (window.x) {
				if (!window.controller) {
				   window.controller = window.x.init(); 
				}
                                const editor = document.getElementById("editor");
                                const value = editor.value;
                                console.log(value);

			        //window.x.submit(value, 12, 1.0);
				window.controller.set_program(value);
			        window.controller.draw();
			    }
			}
		</script>
	</head>
	<body>
		<div id="main">
			<canvas id="canvas"></canvas>
			<div id="controls">
<textarea id="editor">
LSYSTEM (
     F,
     (F -&gt; +F--F+),
     (F -&gt; (MOVE 40), + -&gt; (TURN 45), - -&gt; (TURN -45)) 
 )
</textarea>
				<button onclick="doIt()">submit</button>
			</div>
		</div>

		<script src="index.js"></script>
		<script>
			let canvas = document.getElementById("canvas");
			if (canvas) {
			    canvas.onwheel = evt => {
                                if (evt.deltaY < 0) {
                                    window.zoom = window.zoom * 2;
                                } else {
                                    window.zoom = window.zoom / 2;
                                }
			    } 
			}
	        </script>
	</body>
</html>
